import{f as u,g as _,o as a,F as x,p as w,c as k,n as h,u as n,P as F,l as C,C as V,h as $,w as g,b as e,t as l,d as P,i,q as m,e as f,a as R,W as y}from"./app-8R1G56o3.js";import{_ as T}from"./AuthenticatedLayout-CaGbjJxc.js";import"./ApplicationLogo-BMW9y-Is.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B={key:0,class:"flex flex-wrap -mb-1"},E=["innerHTML"],M={__name:"Pagination",props:{links:{type:Array}},setup(c){return(b,o)=>c.links.length>3?(a(),u("div",B,[(a(!0),u(x,null,w(c.links,(p,d)=>(a(),u(x,{key:d},[p.url===null?(a(),u("div",{key:0,class:"mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-400 border rounded",innerHTML:p.label},null,8,E)):(a(),k(n(F),{key:1,class:h(["mr-1 mb-1 px-4 py-3 text-sm leading-4 border rounded hover:bg-gray-100 focus:border-indigo-500 focus:text-indigo-500",{"bg-blue-700 text-white":p.active}]),href:p.url,innerHTML:p.label},null,8,["class","href","innerHTML"]))],64))),128))])):_("",!0)}},N={class:"py-12"},A={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},L={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},O={class:"p-6 bg-white border-b border-gray-200"},q={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},H={class:"bg-blue-50 p-4 rounded-lg"},I={class:"text-2xl font-bold text-blue-900"},X={class:"bg-green-50 p-4 rounded-lg"},j={class:"text-2xl font-bold text-green-900"},W={class:"bg-purple-50 p-4 rounded-lg"},z={class:"text-2xl font-bold text-purple-900"},G={class:"mb-8 p-4 bg-gray-50 rounded-lg"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},K={class:"md:col-span-2"},Q={class:"md:col-span-2"},Y={class:"flex justify-between items-center mb-4"},Z={class:"overflow-x-auto"},ee={class:"min-w-full divide-y divide-gray-200"},te={class:"bg-white divide-y divide-gray-200"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ae={key:0},de={key:1},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ie={class:"px-6 py-4 whitespace-nowrap text-sm"},me={class:"mt-4"},ge=C({__name:"Index",props:{exchanges:{},summary:{}},setup(c){const b=c,o=V({exchange_date:new Date().toISOString().split("T")[0],usd_amount:0,cop_amount:0,exchange_rate:0,bank_fee_usd:0,bank_fee_cop:0,bank_reference:"",notes:""}),p=()=>{o.post("/currency-exchanges",{onSuccess:()=>{o.reset()}})},d=r=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(r),v=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),S=$(()=>b.exchanges.data.some(r=>r.xero_status==="failed")),D=()=>{y.post("/currency-exchanges/retry-syncs",{},{onSuccess:()=>{y.reload()}})},U=r=>({synced:"Synced",pending:"Pending",failed:"Failed"})[r]||r;return(r,t)=>(a(),k(T,null,{header:g(()=>t[8]||(t[8]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Currency Exchanges ",-1)])),default:g(()=>[e("div",N,[e("div",A,[e("div",L,[e("div",O,[e("div",q,[e("div",H,[t[9]||(t[9]=e("h3",{class:"text-sm font-medium text-blue-800"},"Total USD Exchanged",-1)),e("p",I,"$"+l(d(r.summary.total_usd_exchanged)),1)]),e("div",X,[t[10]||(t[10]=e("h3",{class:"text-sm font-medium text-green-800"},"Total COP Received",-1)),e("p",j,"$"+l(d(r.summary.total_cop_received)),1)]),e("div",W,[t[11]||(t[11]=e("h3",{class:"text-sm font-medium text-purple-800"},"Average Rate",-1)),e("p",z,"$"+l(d(r.summary.average_rate)),1)])]),e("div",G,[t[21]||(t[21]=e("h2",{class:"text-lg font-medium mb-4"},"Record New Exchange",-1)),e("form",{onSubmit:P(p,["prevent"]),class:"space-y-4"},[e("div",J,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"Exchange Date",-1)),i(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=s=>n(o).exchange_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[m,n(o).exchange_date]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"Exchange Rate",-1)),i(e("input",{type:"number",step:"0.0001","onUpdate:modelValue":t[1]||(t[1]=s=>n(o).exchange_rate=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[m,n(o).exchange_rate]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"USD Amount",-1)),i(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[2]||(t[2]=s=>n(o).usd_amount=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[m,n(o).usd_amount]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"COP Amount",-1)),i(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[3]||(t[3]=s=>n(o).cop_amount=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[m,n(o).cop_amount]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700"},"Bank Fee (USD)",-1)),i(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[4]||(t[4]=s=>n(o).bank_fee_usd=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[m,n(o).bank_fee_usd]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Bank Fee (COP)",-1)),i(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[5]||(t[5]=s=>n(o).bank_fee_cop=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[m,n(o).bank_fee_cop]])]),e("div",K,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Bank Reference",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>n(o).bank_reference=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[m,n(o).bank_reference]])]),e("div",Q,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Notes",-1)),i(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>n(o).notes=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[m,n(o).notes]])])]),t[20]||(t[20]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}," Record Exchange ")],-1))],32)]),e("div",null,[e("div",Y,[t[22]||(t[22]=e("h2",{class:"text-lg font-medium"},"Exchange History",-1)),S.value?(a(),u("button",{key:0,onClick:D,class:"bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2"}," Retry Failed Xero Syncs ")):_("",!0)]),e("div",Z,[e("table",ee,[t[24]||(t[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"USD Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"COP Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rate"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Bank Fees"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Reference"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Xero Status")])],-1)),e("tbody",te,[(a(!0),u(x,null,w(r.exchanges.data,s=>(a(),u("tr",{key:s.id},[e("td",se,l(v(s.exchange_date)),1),e("td",oe," $"+l(d(s.usd_amount)),1),e("td",ne," $"+l(d(s.cop_amount)),1),e("td",re," $"+l(d(s.exchange_rate)),1),e("td",le,[s.bank_fee_usd||s.bank_fee_cop?(a(),u("span",ae,[f(" USD: $"+l(d(s.bank_fee_usd)),1),t[23]||(t[23]=e("br",null,null,-1)),f(" COP: $"+l(d(s.bank_fee_cop)),1)])):(a(),u("span",de,"-"))]),e("td",ue,l(s.bank_reference||"-"),1),e("td",ie,[e("span",{class:h({"text-green-600":s.xero_status==="synced","text-yellow-600":s.xero_status==="pending","text-red-600":s.xero_status==="failed"})},l(U(s.xero_status)),3)])]))),128))])])]),e("div",me,[R(M,{links:r.exchanges.links},null,8,["links"])])])])])])])]),_:1}))}});export{ge as default};
