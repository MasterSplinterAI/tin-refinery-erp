import{_ as m}from"./AuthenticatedLayout-CaGbjJxc.js";import{x as h,k as c,j as x,W as f,f as s,o as r,a as u,u as b,m as v,w as g,b as e,g as a,t as l,F as y}from"./app-8R1G56o3.js";import"./ApplicationLogo-BMW9y-Is.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const _={class:"py-12"},w={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},k={key:0,class:"mb-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},C={key:1,class:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},S={key:2,class:"mb-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},X={key:3,class:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},j={class:"mb-6 overflow-hidden bg-white shadow-sm sm:rounded-lg"},$={class:"p-6"},B={key:0,class:"flex items-center mb-4"},I={key:1,class:"flex items-center mb-4"},M={class:"flex"},D=["href"],N=["action"],F=["value"],T={__name:"Dashboard",props:{xero_connected:Boolean,flash:Object},setup(i){h().props.appUrl;const n=c(""),d=c("");return x(()=>{if(window.location.search.includes("xero_auth=true")){const t=localStorage.getItem("xero_auth_code"),o=localStorage.getItem("xero_auth_state");localStorage.getItem("xero_auth_time"),t&&o&&(localStorage.removeItem("xero_auth_code"),localStorage.removeItem("xero_auth_state"),localStorage.removeItem("xero_auth_time"),n.value="Processing Xero authorization...",f.post("/api/xero/process-auth",{code:t,state:o},{onSuccess:()=>{n.value="Successfully connected to Xero!",setTimeout(()=>{window.location.href="/dashboard"},1500)},onError:p=>{d.value="Failed to connect to Xero. "+Object.values(p).join(", ")}}))}}),(t,o)=>(r(),s(y,null,[u(b(v),{title:"Dashboard"}),u(m,null,{header:g(()=>o[0]||(o[0]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Dashboard ",-1)])),default:g(()=>[e("div",_,[e("div",w,[t.$page.props.flash&&t.$page.props.flash.success?(r(),s("div",k,[e("p",null,l(t.$page.props.flash.success),1)])):a("",!0),t.$page.props.flash&&t.$page.props.flash.error?(r(),s("div",C,[e("p",null,l(t.$page.props.flash.error),1)])):a("",!0),n.value?(r(),s("div",S,[e("p",null,l(n.value),1)])):a("",!0),d.value?(r(),s("div",X,[e("p",null,l(d.value),1)])):a("",!0),e("div",j,[e("div",$,[o[4]||(o[4]=e("h3",{class:"text-lg font-semibold mb-4"},"Xero Connection",-1)),i.xero_connected?(r(),s("div",B,o[1]||(o[1]=[e("div",{class:"mr-4 flex-shrink-0"},[e("span",{class:"inline-flex items-center justify-center h-10 w-10 rounded-full bg-green-100"},[e("svg",{class:"h-6 w-6 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])])],-1),e("div",null,[e("h4",{class:"text-md font-medium text-gray-900"},"Connected to Xero"),e("p",{class:"text-sm text-gray-500"},"Your application is connected to Xero. Currency exchanges will be synced automatically.")],-1)]))):(r(),s("div",I,o[2]||(o[2]=[e("div",{class:"mr-4 flex-shrink-0"},[e("span",{class:"inline-flex items-center justify-center h-10 w-10 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])])],-1),e("div",null,[e("h4",{class:"text-md font-medium text-gray-900"},"Not Connected to Xero"),e("p",{class:"text-sm text-gray-500"},"Connect your Xero account to enable automatic syncing of currency exchanges.")],-1)]))),e("div",M,[i.xero_connected?(r(),s("form",{key:1,action:t.route("xero.disconnect"),method:"POST"},[e("input",{type:"hidden",name:"_token",value:t.$page.props.csrf_token},null,8,F),o[3]||(o[3]=e("button",{type:"submit",class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500"}," Disconnect from Xero ",-1))],8,N)):(r(),s("a",{key:0,href:t.route("xero.connect"),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Connect to Xero ",8,D))])])]),o[5]||(o[5]=e("div",{class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},[e("div",{class:"p-6 text-gray-900"}," You're logged in! ")],-1))])])]),_:1})],64))}};export{T as default};
